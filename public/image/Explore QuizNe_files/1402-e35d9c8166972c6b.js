"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1402],{55777:function(e,t,i){i.d(t,{Vo:function(){return o}});var n=i(89950),r=i(64402),u=i(72744);let getQuizBySlugServerSide=async e=>{try{let t=await (0,n.Z)("quiz/.by.slug/".concat(e),{cache:"no-cache",next:{revalidate:void 0}}),i=await t.json();return i.data}catch(e){return null}},o={getQuizzesForSitemap:()=>r.ZP.get("quiz/sitemap"),getQuizzesForSlide:()=>r.ZP.get("quiz/slide"),getQuizzesForHome:(e,t,i)=>{let n=(0,u.N)({page:e,perPage:10,order:"DESC",languages:t,subjects:i});return r.ZP.get("quiz/home/?".concat(n))},getQuizzesForMyList:(e,t,i)=>{let n=(0,u.N)({page:e,perPage:t,order:"DESC",status:i});return r.ZP.get("quiz/my-list?".concat(n))},getQuizBySlugServerSide,getQuizById:e=>r.ZP.get("quiz/".concat(e)),getQuizzesForSlugUser:(e,t,i,n)=>{let o=(0,u.N)({page:t,perPage:i,order:"DESC",status:n});return r.ZP.get("quiz/user-profile/".concat(e,"?").concat(o))},duplicate:e=>r.ZP.post("quiz/duplicate",e),create:e=>r.ZP.post("quiz",e),update:e=>r.ZP.patch("quiz",e),destroy:e=>r.ZP.destroy("quiz/".concat(e))};t.ZP=o},72744:function(e,t,i){i.d(t,{N:function(){return generateQueryParams}});let generateQueryParams=e=>{let t=[];return Object.keys(e).map(i=>{e[i]&&t.push("".concat(i,"=").concat(e[i]))}),t.join("&")}},29982:function(e,t,i){i.d(t,{A9:function(){return c},Bg:function(){return d},CJ:function(){return r},Eu:function(){return h},Lo:function(){return s},MK:function(){return l},Rs:function(){return a},TI:function(){return m},U5:function(){return o},ZQ:function(){return u},_E:function(){return _},f$:function(){return f},kc:function(){return v},tX:function(){return p},vX:function(){return z},wG:function(){return g},xy:function(){return q},zr:function(){return Q}});var n=i(95036);let r=25,u=100,o="",s=null,l="",a={type:"multiple_choice",countdown:r,point:u,title:o,media:s},c={multiple_choice:"ico-list",type_the_answer:"ico-edit-3",true_false_choice:"ico-check-circle",slide:"ico-sliders-horizontal-alt",puzzle:"ico-custom-grid"},d={multiple_choice:"multiple_choice",type_the_answer:"type_the_answer",true_false_choice:"true_false_choice",slide:"slide",puzzle:"puzzle"},p=200,g=100,m=40,v={[n.rL.EASY]:"create_quiz.game_level.easy",[n.rL.MEDIUM]:"create_quiz.game_level.medium",[n.rL.HARD]:"create_quiz.game_level.hard"},z={[n.g_.SCIENCE]:"create_quiz.game_subject.science",[n.g_.LANGUAGE]:"create_quiz.game_subject.language",[n.g_.MATH]:"create_quiz.game_subject.math",[n.g_.SPORTS]:"create_quiz.game_subject.sports",[n.g_.UNIVERSE]:"create_quiz.game_subject.universe",[n.g_.LITERATURE]:"create_quiz.game_subject.literature",[n.g_.HISTORY]:"create_quiz.game_subject.history",[n.g_.GEOGRAPHY]:"create_quiz.game_subject.geography",[n.g_.VEHICLES]:"create_quiz.game_subject.vehicles",[n.g_.MUSIC]:"create_quiz.game_subject.music",[n.g_.MOVIE]:"create_quiz.game_subject.movie",[n.g_.CHEMISTRY]:"create_quiz.game_subject.chemistry",[n.g_.INFORMATICS]:"create_quiz.game_subject.informatics",[n.g_.ANIMAL]:"create_quiz.game_subject.animal",[n.g_.DESIGN]:"create_quiz.game_subject.design",[n.g_.TRAVEL]:"create_quiz.game_subject.travel",[n.g_.TECHNOLOGY]:"create_quiz.game_subject.technology",[n.g_.HOLIDAY]:"create_quiz.game_subject.holiday",[n.g_.ENGLISH]:"create_quiz.game_subject.english",[n.g_.OTHER]:"create_quiz.game_subject.other"};n.q9.PUBLISH,n.q9.PRIVATE;let q=["multiple_choice","type_the_answer"],f=["multiple_choice","type_the_answer","true_false_choice","slide","puzzle"],_=["quizneenglish@gmail.com","phuclam.compus@gmail.com","thapluaolympia.muaviii@gmail.com"],h=Array.from({length:5},(e,t)=>(t+2)*50),w=Array.from({length:49},(e,t)=>t+1),y=Array.from({length:11},(e,t)=>5*t+50),Q=[...w,...y]},9707:function(e,t,i){i.d(t,{Oe:function(){return u},dD:function(){return l},g0:function(){return r},nn:function(){return o},qz:function(){return s},zY:function(){return p}});var n=i(29982);let r=2,u=6,o=["single-correct-answer","multiple-correct-answer"],s={"single-correct-answer":"single_correct_answer","multiple-correct-answer":"multiple_correct_answer"},l={correct:!1,text:"",media:null,explain:""},a=n.U5,c=n.Lo,d=[{id:"1",...l,correct:!0},{id:"2",...l},{id:"3",...l},{id:"4",...l}],p={type:"multiple_choice",title:a,media:c,answers:d}},80086:function(e,t,i){i.d(t,{Ii:function(){return c},SR:function(){return a},Sj:function(){return r},ad:function(){return d},eH:function(){return u}});var n=i(29982);let r=1,u=20,o=n.U5,s=n.Lo,l=n.MK,a={type:"type_the_answer",title:o,explanation:l,media:s,answers:[{id:"1",text:"",condition:"is-exactly",explain:""},{id:"2",text:"",condition:"contains",explain:""}]},c=["is-exactly","contains"],d={"is-exactly":"is_exactly",contains:"contains"}},21402:function(e,t,i){i.d(t,{u:function(){return p}});var n=i(94660),r=i(74810),u=i(39991),o=i(55777),s=i(95036),l=i(64402),a={createQuestion:e=>l.v_("question/create",e),updateQuestion:e=>l.r$("question/update",e),updateManyQuestion:e=>l.r$("question/update-many",e),deleteQuestion:e=>l.ob("question/delete/"+e.id),deleteAllQuestionsByQuizId:e=>l.ob("question/delete-all-by-quiz/".concat(e))},c=i(85871);let d={currentOrder:0,isFetching:!1,error:"",quiz:null,planConfigs:null,oldQuizStatus:s.q9.DRAFT,questionsByJson:[]},p=(0,n.Ue)()((0,r.mW)((0,u.n)((e,t)=>({...d,initialQuiz:async i=>{let n=t();if(!n.isFetching&&!n.quiz)try{e({isFetching:!0});let{data:t}=await o.ZP.getQuizById(i),r=(t.data.questions||[]).map(e=>(0,c.Is)(e)),{level:u,name:s,description:l,status:a,media:d,grade:p,language:g,subject:m,isAdult:v=!1}=t.data;e({quiz:{id:i,level:u,name:s,description:l,status:a,media:d,grade:p,subject:m,language:g,questions:r,isAdult:v},oldQuizStatus:a,isFetching:!1}),n.fixQuestions()}finally{e({isFetching:!1})}},setPlanConfigs:t=>{e(e=>{e.planConfigs=t})},updateQuiz:t=>{e(e=>{var i,n,r,u,o,s,l,a,c;e.quiz&&(e.quiz.name=null!==(i=null==t?void 0:t.name)&&void 0!==i?i:e.quiz.name,e.quiz.grade=null!==(n=null==t?void 0:t.grade)&&void 0!==n?n:e.quiz.grade,e.quiz.subject=null!==(r=null==t?void 0:t.subject)&&void 0!==r?r:e.quiz.subject,e.quiz.language=null!==(u=null==t?void 0:t.language)&&void 0!==u?u:e.quiz.language,e.quiz.status=null!==(o=null==t?void 0:t.status)&&void 0!==o?o:e.quiz.status,e.quiz.level=null!==(s=null==t?void 0:t.level)&&void 0!==s?s:e.quiz.level,e.quiz.description=null!==(l=null==t?void 0:t.description)&&void 0!==l?l:e.quiz.description,e.quiz.media=null!==(a=null==t?void 0:t.media)&&void 0!==a?a:e.quiz.media,e.quiz.isAdult=null!==(c=null==t?void 0:t.isAdult)&&void 0!==c?c:e.quiz.isAdult)})},saveQuiz:async e=>{let i=(null==e?void 0:e.draftQuiz)||!1,n=null==e?void 0:e.status,{quiz:r}=t();if(!(null==r?void 0:r.id))return;let{id:u,name:l,description:a,level:c,media:d,grade:p,language:g,subject:m,isAdult:v}=r,z=i?s.q9.DRAFT:n,q=null==d?void 0:d.id;await o.ZP.update({id:u,name:l,description:a,level:c,status:z,language:g,mediaId:q,grade:p,subject:m,isAdult:v})},initialNewQuestion:t=>{e(e=>{var i;let n=!!(null===(i=e.quiz)||void 0===i?void 0:i.questions.find(e=>e.order===t));if(n&&e.quiz){let i=e.quiz.questions.map(e=>({...e,order:e.order>=t?e.order+1:e.order}));e.quiz.questions=i}e.currentOrder=t})},updateQuestion:i=>{let{fixQuestions:n}=t();e(e=>{var t;let{order:n}=i,r=null===(t=e.quiz)||void 0===t?void 0:t.questions.findIndex(e=>e.order===n);if(void 0!==r&&e.quiz){if(-1!==r){let t=e.quiz.questions[r];t&&Object.assign(t,i)}else e.quiz.questions.push(i)}}),n()},createQuestionsByJson:async(i,n)=>{let{quiz:r,fixQuestions:u}=t();if(!n&&!r)return;let o=!!(r&&(null==r?void 0:r.questions.length)>0);if(o){let t=r.questions.reduce((e,t)=>t.order>e.order?t:e,r.questions[0]),n=null==i?void 0:i.map(e=>({...e,order:e.order+t.order}));null==n||n.map(async t=>{let{answers:i,countdown:n,order:u,point:o,title:s,type:l}=t,d={title:s,answers:i,countdown:n,order:u,point:o,quizId:r.id,type:l},p=await a.createQuestion(d),g=p.data.data;e(e=>{var t;null===(t=e.quiz)||void 0===t||t.questions.push((0,c.Is)(g))})})}n&&!o&&(null==i||i.map(async t=>{let{answers:i,countdown:r,order:u,point:o,title:s,type:l}=t,d=await a.createQuestion({title:s,answers:i,countdown:r,order:u,point:o,quizId:n,type:l}),p=d.data.data;e(e=>{var t;null===(t=e.quiz)||void 0===t||t.questions.push((0,c.Is)(p))})})),u()},updateQuestionOrders:i=>{let{fixQuestions:n,saveAllQuestion:r}=t();e(e=>{i.forEach((t,i)=>{var n;let r=null===(n=e.quiz)||void 0===n?void 0:n.questions.find(e=>e.id===t);r&&(r.order=i+1)})}),n(),r()},duplicateAndSaveQuestion:async i=>{let{quiz:n,fixQuestions:r,saveAllQuestion:u}=t();if(!i.id||!(null==n?void 0:n.id))return;let{answers:o,countdown:s,point:l,type:c,media:d,explanation:p}=i,g=i.title+" copy",m=i.order+1,v={title:g,explanation:p,answers:o,order:m,countdown:s,point:l,type:c,mediaId:null==d?void 0:d.id,quizId:n.id};a.createQuestion(v).then(t=>{let{data:i}=t;e(e=>{var t;if(!(null===(t=e.quiz)||void 0===t?void 0:t.questions))return;e.quiz.questions.map((t,i)=>{e.quiz&&t.order>=m&&(e.quiz.questions[i].order=t.order+1)});let n={...v,id:i.data.id,media:i.data.media};e.quiz.questions.push(n)}),r(),u()})},deleteAndSaveQuestion:async i=>{let{fixQuestions:n,saveAllQuestion:r}=t();i.id&&a.deleteQuestion({id:i.id}).then(()=>{e(e=>{var t;(null===(t=e.quiz)||void 0===t?void 0:t.questions)&&(e.quiz.questions=e.quiz.questions.filter(e=>e.id!==i.id))}),n(),r()})},saveAllQuestion:async i=>{let n=(null==i?void 0:i.draftQuiz)||!1,{quiz:r}=t();if(!r)return;n&&(null==r?void 0:r.status)!==s.q9.DRAFT&&await o.ZP.update({id:null==r?void 0:r.id,status:s.q9.DRAFT}).then(()=>{e(e=>{e.quiz&&(e.quiz.status=s.q9.DRAFT)})});let u=[],l=[];return r.questions.map((t,i)=>{if(null==t?void 0:t.id){let{id:e,answers:i,countdown:n,order:r,point:u,title:o,type:s,media:a,explanation:c}=t,d=(null==a?void 0:a.id)||null;l.push({id:e,title:o,answers:i,order:r,countdown:n,point:u,type:s,mediaId:d,explanation:c})}else{let{answers:n,countdown:o,order:s,point:l,title:c,type:d,media:p,explanation:g}=t,m=null==p?void 0:p.id,v=r.id,z=a.createQuestion({title:c,answers:n,order:s,countdown:o,point:l,type:d,mediaId:m,quizId:v,explanation:g}).then(t=>{let{data:n}=t;e(e=>{e.quiz&&(e.quiz.questions[i].id=n.data.id)})});u.push(z)}}),u.push(a.updateManyQuestion(l)),await Promise.all(u),r.questions},deleteAllQuestion:async t=>{await a.deleteAllQuestionsByQuizId(t),e(e=>{e.quiz&&e.quiz.questions&&(e.quiz.questions=[])})},setCurrentOder:t=>{e({currentOrder:t})},setQuestionsByJson:t=>{e({questionsByJson:t})},clearQuestionsByJson:()=>{e({questionsByJson:[]})},fixQuestions:()=>{e(e=>{var t;(null===(t=e.quiz)||void 0===t?void 0:t.questions)&&(e.quiz.questions=(0,c.Kk)(e.quiz.questions))})},clearState:()=>{e(d)},clearCURD:()=>{e({error:"",isFetching:!1})}}))))},85871:function(e,t,i){i.d(t,{Is:function(){return questionAttributeToQuizQuestion},Kk:function(){return fixOrderForQuestionList},X0:function(){return convertJSONtoQuestions},uS:function(){return initializeQuestionOptions},un:function(){return verifyQuestion}});var n=i(92008),r=i(95036),u=i(29982),o=i(44518),s=i(42594),l=i(68150);let initializeQuestionOptions=e=>{var t,i,n;return{type:null!==(t=e.type)&&void 0!==t?t:u.Rs.type,point:null!==(i=e.point)&&void 0!==i?i:u.Rs.point,countdown:null!==(n=e.countdown)&&void 0!==n?n:u.Rs.countdown}},verifyQuestion=e=>"multiple_choice"===e.type?(0,o.yj)(e):"type_the_answer"===e.type?(0,l.vz)(e):"true_false_choice"===e.type?(0,s.Kt)(e):{valid:!0,detail:{}},questionAttributeToQuizQuestion=e=>{var t;return{id:null==e?void 0:e.id,answers:null==e?void 0:e.answers,title:null==e?void 0:e.title,explanation:null==e?void 0:e.explanation,type:null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.slug,order:null==e?void 0:e.order,point:null==e?void 0:e.point,countdown:null==e?void 0:e.countdown,media:null==e?void 0:e.media,quizId:null==e?void 0:e.quizId}},fixOrderForQuestionList=e=>{let t=!1,i=!1,r=(0,n.Z)(e);r.sort((e,i)=>(e.order===i.order&&(t=!0),e.order-i.order)).map((e,t)=>{e.order!==t+1&&(i=!0)});let u=t||i;return u&&r.map((e,t)=>{r[t].order=t+1}),r},validateString=e=>void 0!==e&&""!==e&&"string"==typeof e,validateNumber=e=>void 0!==e&&"number"==typeof e,checkValidQuestionsJSON=e=>{try{let t=JSON.parse(e);if(!t)return;let i=t.filter(e=>{let t=e.answers.filter(e=>{let t=!!validateString(e.text),i="boolean"==typeof e.correct;if(t&&i)return e}),i=2===t.length&&2===t.filter(e=>!0===e.correct).length,n=!e.countdown||!!validateNumber(e.countdown),r=!e.order||!!validateNumber(e.order),u=!e.point||!!validateNumber(e.point),o=!!validateString(e.title),s=void 0!==e.answers&&t.length>1&&!i;if(o&&s&&u&&r&&n)return e});return i}catch(e){return}},convertJSONtoQuestions=e=>{if(!e||""===e)return{data:void 0,error:"empty json",status:"error"};let t=checkValidQuestionsJSON(e);if(!t||t.length<1)return{data:void 0,error:"Wrong json format",status:"error"};let i=t.map((e,t)=>{let{title:i,order:n,countdown:u,point:o,answers:s}=e,l=s.map((e,t)=>{let{text:i,explain:n,correct:r}=e;return{id:(t+1).toString(),text:i,explain:n||"",correct:r}});return{title:i,order:n||t+1,countdown:u||30,point:o||100,answers:l,type:r._k.MULTIPLE_CHOICE,quizId:""}});return{data:i,status:"success",message:"Accepted JSON"}}},44518:function(e,t,i){i.d(t,{BO:function(){return replaceCorrectAnswer},Nh:function(){return reduceCorrectAnswer},Ou:function(){return checkDifferentInitQuestion},bM:function(){return initializeMultipleChoiceMainContent},ps:function(){return initialMultipleChoiceAnswer},yj:function(){return verifyMultipleChoiceQuestion}});var n=i(92008),r=i(94070),u=i(9707);let initializeMultipleChoiceMainContent=e=>{var t,i,r,o;return(0,n.Z)({type:"multiple_choice",title:null!==(t=null==e?void 0:e.title)&&void 0!==t?t:u.zY.title,media:null!==(i=null==e?void 0:e.media)&&void 0!==i?i:u.zY.media,explanation:null!==(r=null==e?void 0:e.explanation)&&void 0!==r?r:u.zY.explanation,answers:null!==(o=null==e?void 0:e.answers)&&void 0!==o?o:u.zY.answers})},initialMultipleChoiceAnswer=e=>{let t=1;for(;e.some(e=>String(e.id)===String(t));)t+=1;return(0,n.Z)({...u.dD,id:String(t)})},checkDifferentInitQuestion=e=>{let getPropsCompare=e=>{let t=(0,n.Z)(e);return{title:t.title,media:t.media,answers:t.answers.sort((e,t)=>Number(e.id)-Number(t.id))}};return(0,r.Z)(getPropsCompare(e),getPropsCompare(u.zY))},reduceCorrectAnswer=(e,t)=>{let i=t;return e.map(e=>i>0&&e.correct?(i-=1,{...e,correct:!0}):{...e,correct:!1})},replaceCorrectAnswer=(e,t)=>e.map((e,i)=>({...e,correct:i===t})),verifyMultipleChoiceQuestion=e=>{let t={missingTitle:!1,missingAnswer:!1,missingTrueAnswer:!1,missingWrongAnswer:!1,answerMissingData:[]},i=(0,n.Z)(t);e.title||(t.missingTitle=!0),e.answers.length||(t.missingAnswer=!0);let u=0;e.answers.map((e,i)=>{e.media||e.text||t.answerMissingData.push(i),e.correct&&(u+=1)}),0===u&&(t.missingTrueAnswer=!0),u===e.answers.length&&(t.missingWrongAnswer=!0);let o=(0,r.Z)(i,t);return{valid:o,detail:t}}},42594:function(e,t,i){i.d(t,{Ou:function(){return checkDifferentInitQuestion},hJ:function(){return initializeTrueFalseChoiceMainContent},BO:function(){return replaceCorrectAnswer},Kt:function(){return verifyTrueFalseChoiceQuestion}});var n=i(92008),r=i(94070),u=i(29982);let o={correct:!1,text:"",explain:""},s=u.U5,l=u.Lo,a=[{id:"1",...o,correct:!0,text:"true"},{id:"2",...o,text:"false"}],c={type:"true_false_choice",title:s,media:l,answers:a},initializeTrueFalseChoiceMainContent=e=>{var t,i,r,u;return(0,n.Z)({type:"true_false_choice",title:null!==(t=null==e?void 0:e.title)&&void 0!==t?t:c.title,media:null!==(i=null==e?void 0:e.media)&&void 0!==i?i:c.media,explanation:null!==(r=null==e?void 0:e.explanation)&&void 0!==r?r:c.explanation,answers:null!==(u=null==e?void 0:e.answers)&&void 0!==u?u:c.answers})},checkDifferentInitQuestion=e=>{let getPropsCompare=e=>{let t=(0,n.Z)(e);return{title:t.title,media:t.media,answers:t.answers.sort((e,t)=>Number(e.id)-Number(t.id))}};return(0,r.Z)(getPropsCompare(e),getPropsCompare(c))},replaceCorrectAnswer=(e,t)=>e.map((e,i)=>({...e,correct:i===t})),verifyTrueFalseChoiceQuestion=e=>{let t={missingTitle:!1,missingAnswer:!1,missingTrueAnswer:!1,missingWrongAnswer:!1,answerMissingData:[]},i=(0,n.Z)(t);e.title||(t.missingTitle=!0),e.answers.length||(t.missingAnswer=!0);let u=0;e.answers.map(e=>{e.correct&&(u+=1)}),0===u&&(t.missingTrueAnswer=!0),u===e.answers.length&&(t.missingWrongAnswer=!0);let o=(0,r.Z)(i,t);return{valid:o,detail:t}}},68150:function(e,t,i){i.d(t,{XS:function(){return checkDifferentInitialTypeTheAnswer},d4:function(){return initializeMainContentForTypeTheAnswer},vz:function(){return verifyTypeTheAnswerQuestion},ys:function(){return initializeAnswerForTypeTheAnswer}});var n=i(92008),r=i(94070),u=i(80086);let initializeMainContentForTypeTheAnswer=e=>{try{var t,i,r,o;return(0,n.Z)({type:"type_the_answer",title:null!==(t=null==e?void 0:e.title)&&void 0!==t?t:u.SR.title,explanation:null!==(i=null==e?void 0:e.explanation)&&void 0!==i?i:u.SR.explanation,media:null!==(r=null==e?void 0:e.media)&&void 0!==r?r:u.SR.media,answers:null!==(o=null==e?void 0:e.answers)&&void 0!==o?o:u.SR.answers})}catch(e){return(0,n.Z)(u.SR)}},initializeAnswerForTypeTheAnswer=e=>{let t=1;for(;e.some(e=>String(e.id)===String(t));)t+=1;return{id:String(t),condition:"is-exactly",explain:"",text:""}},checkDifferentInitialTypeTheAnswer=e=>{let getPropsCompare=e=>{let t=(0,n.Z)(e);return{title:t.title,media:t.media,explanation:t.explanation,answers:t.answers.sort((e,t)=>Number(e.id)-Number(t.id))}};return(0,r.Z)(getPropsCompare(e),getPropsCompare(u.SR))},verifyTypeTheAnswerQuestion=e=>{let t={missingTitle:!1,missingAnswer:!1,answerMissingData:[]},i=(0,n.Z)(t);e.title||(t.missingTitle=!0),e.answers.length||(t.missingAnswer=!0),e.answers.map((e,i)=>{e.text&&e.condition||t.answerMissingData.push(i)});let u=(0,r.Z)(i,t);return{valid:u,detail:t}}}}]);